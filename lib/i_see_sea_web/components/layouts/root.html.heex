<!DOCTYPE html>
<html data-theme="base" lang="en" class="bg-white">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="csrf-token" content={get_csrf_token()} />
    <.live_title suffix=" Â· Phoenix Framework">
      <%= assigns[:page_title] || "ISeeSea" %>
    </.live_title>
    <link phx-track-static rel="stylesheet" href={~p"/assets/app.css"} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.Default.css"
      rel="stylesheet"
    />
    <script defer phx-track-static type="text/javascript" src={~p"/assets/app.js"}>
    </script>
  </head>
  <body class="bg-white h-screen w-screen">
    <dialog id="modal_fullscreen_image_slider" class="modal">
      <div class="modal-box relative">
        <img src="${picture}" alt="Large Picture" class="w-full h-auto" />
      </div>
      <label class="modal-backdrop" for="modal_fullscreen_image_slider">Close</label>
    </dialog>
    <nav class="flex relative pb-0.5 w-full shadow-md mb-4">
      <!-- SVG for wave background -->
      <svg
        class="absolute z-0"
        width="100%"
        height="180px"
        viewBox="0 0 100 25"
        preserveAspectRatio="none"
      >
        <g transform="scale(-1, 1) translate(-100, 0)">
          <path
            d="M0 0 V10
        Q13 15 50 8
        Q14 15 50 8
        Q15 15 50 8
        Q16 15 50 8
        Q17 15 50 8
        Q18 15 50 8
        Q19 15 50 8
        Q20 15 50 8
        T100 8.5 V0z"
            fill="rgb(212, 241, 244)"
            opacity="1"
          />
          <path
            d="M0 0 V10
        Q18 13 53 6.5 
        Q19 13 53 6.5 
        Q20 13 53 6.5 
        Q21 13 53 6.5 
        Q22 13 53 6.5 
        Q23 13 53 6.5 
        Q24 13 53 6.5 
        Q25 13 53 6.5 
        T100 6 V0z"
            fill="rgb(117, 230, 218)"
            opacity="0.4"
          />
          <path
            d="M0 0 V9 
        Q16 12 45 6 
        Q9 12 45 6 
        Q10 12 45 6 
        Q11 12 45 6 
        Q12 12 45 6 
        Q13 12 45 6 
        Q14 12 45 6 
        Q15 12 45 6 
        T100 4 V0z"
            fill="rgb(24, 154, 180)"
            opacity="0.9"
          />
        </g>
      </svg>
      <!-- Navigation bar content -->
      <div class="flex justify-end items-end px-30 w-10/12 md:w-10/12">
        <div class="flex w-full justify-between items-baseline">
          <!-- Logo -->
          <div class="relative w-28 top-2 left-2 sm:w-16 md:w-24 lg:w-28">
            <.link class="z-10" navigate={~p"/"}>
              <img class="z-10 w-full h-auto" src="/images/home-icons/ICC-logo.png" />
            </.link>
          </div>

          <div class="flex w-4/5 justify-around mb-2">
            <!-- Buttons for larger screens -->
            <div class="hidden sm:flex w-5/5 justify-around space-x-1">
              <.link class="z-10" navigate={~p"/"}>
                <button class="btn md:min-w-32">
                  <%= gettext("Home") %>
                </button>
              </.link>
              <.link class="z-10" navigate={~p"/profile"}>
                <button class="btn md:min-w-32">
                  <%= gettext("Profile") %>
                </button>
              </.link>
              <.link class="z-10" navigate={~p"/reports-list"}>
                <button class="btn md:min-w-32">
                  <%= gettext("Reports") %>
                </button>
              </.link>
              <div class="dropdown dropdown-bottom">
                <div tabindex="0" role="button" class="btn flex-1 md:min-w-32">More</div>
                <ul
                  tabindex="0"
                  class="dropdown-content menu bg-base-100 rounded-box z-50 w-52 p-2 shadow"
                >
                  <li>
                    <.link class="z-10" navigate={~p"/terms-and-conditions"}>
                      <%= gettext("Terms of use") %>
                    </.link>
                  </li>
                  <li>
                    <.link class="z-10" navigate={~p"/about"}>
                      <%= gettext("Our purpose") %>
                    </.link>
                  </li>
                  <li>
                    <.link class="z-10" navigate={~p"/contacts"}>
                      <%= gettext("Contacts") %>
                    </.link>
                  </li>
                  <li>
                    <.link class="z-10" navigate={~p"/privacy-policy"}>
                      <%= gettext("Privacy and policy") %>
                    </.link>
                  </li>
                </ul>
              </div>
            </div>
            <!-- Mobile Menu Button -->
            <div class="flex w-4/5 align-baseline justify-center mr-4 sm:hidden">
              <div class="slider-container">
                <!-- Left arrow -->
                <button class="arrow-left hidden">
                  <img src="/images/home-icons/left-arrow-icon.svg" />
                </button>
                <!-- The slider itself -->
                <div class="slider-wrapper">
                  <.link class="z-10 slider-item" navigate={~p"/"}>
                    <%= gettext("Home") %>
                  </.link>
                  <.link class="z-10 slider-item" navigate={~p"/profile"}>
                    <%= gettext("Profile") %>
                  </.link>
                  <.link class="z-10 slider-item" navigate={~p"/reports-list"}>
                    <%= gettext("Reports") %>
                  </.link>
                  <.link class="z-10 slider-item" navigate={~p"/about"}>
                    <%= gettext("Our purpose") %>
                  </.link>
                  <.link class="z-10 slider-item" navigate={~p"/terms-and-conditions"}>
                    <%= gettext("Terms of use") %>
                  </.link>
                  <.link class="z-10 slider-item" navigate={~p"/privacy-policy"}>
                    <%= gettext("Privacy Policy") %>
                  </.link>
                  <.link class="z-10 slider-item" navigate={~p"/contacts"}>
                    <%= gettext("Contacts") %>
                  </.link>
                </div>
                <!-- Right arrow -->
                <button class="arrow-right">
                  <img src="/images/home-icons/right-arrow-icon.svg" />
                </button>
              </div>
            </div>
          </div>
          <!-- User and login images -->
        </div>
      </div>
      <div class="flex flex-row justify-start w-3/12 mb-2 md:w-2/12 items-end">
        <!-- Language Button -->
        <button class="z-20 w-[30px] h-[20px] sm:w-[40px] sm:h-[30px] md:w-[57px] md:h-[47px]">
          <img
            src="/images/home-icons/bulgarian_flag_transparent.png"
            class="w-full h-full"
            alt="Language Selection"
          />
        </button>
        <!-- Login Button -->
        <.link
        
          class="z-10 w-[30px] h-[23px] sm:w-[40px] sm:h-[33px] md:w-[57px] md:h-[50px]"
          navigate={~p"/login"}
        >
           <%= if assigns[:current_user] do %>
              <img src="/images/auth_icons/logout.svg" class="object-cover" alt="Logout" />
            <% else %>
             <img src="/images/auth_icons/login.svg" class="object-cover" alt="Login" />
            <% end %>
          
        </.link>
      </div>
    </nav>
    <div class="relative bg-white w-full h-4/6">
      <%= @inner_content %>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const wrapper = document.querySelector('.slider-wrapper');
        const items = document.querySelectorAll('.slider-item');
        const leftArrow = document.querySelector('.arrow-left');
        const rightArrow = document.querySelector('.arrow-right');
        let currentIndex = 0;

        function showItem(index) {
          const offset = -index * 100; // Calculate the offset for the current item
          wrapper.style.transform = `translateX(${offset}%)`;
          updateArrows(); // Update arrow visibility
        }

        // Left arrow click (swipe right)
        leftArrow.addEventListener('click', () => {
          if (currentIndex > 0) {
            currentIndex--;
            showItem(currentIndex);
          }
        });

        // Right arrow click (swipe left)
        rightArrow.addEventListener('click', () => {
          if (currentIndex < items.length - 1) {
            currentIndex++;
            showItem(currentIndex);
          }
        });

        // Handle swipe gestures for touchscreens
        let touchStartX = 0;
        let touchEndX = 0;

        wrapper.addEventListener('touchstart', e => {
          touchStartX = e.changedTouches[0].screenX;
        });

        wrapper.addEventListener('touchend', e => {
          touchEndX = e.changedTouches[0].screenX;
          handleSwipe();
        });

        function handleSwipe() {
          if (touchEndX < touchStartX && currentIndex < items.length - 1) {
            currentIndex++;
            showItem(currentIndex);
          } else if (touchEndX > touchStartX && currentIndex > 0) {
            currentIndex--;
            showItem(currentIndex);
          }
        }

        // Show/hide the left and right arrows based on the current item
        function updateArrows() {
          if (currentIndex === 0) {
            leftArrow.classList.add('hidden');
          } else {
            leftArrow.classList.remove('hidden');
          }

          if (currentIndex === items.length - 1) {
            rightArrow.classList.add('hidden');
          } else {
            rightArrow.classList.remove('hidden');
          }
        }

        showItem(currentIndex); // Initialize
      });
    </script>
  </body>
</html>
